function [dydt,M,C,G] = myode_output(y,tau_action)
q_ode=y(1:7);
qd_ode=y(8:14);
q1=y(1);q2=y(2);q3=y(3);q4=y(4);q5=y(5);q6=y(6);q7=y(7);%从状态量中读取自由度
q1_d=y(8);q2_d=y(9);q3_d=y(10);q4_d=y(11);q5_d=y(12);q6_d=y(13);q7_d=y(14);
%% M/C/G
M1 = Calc_M1(q1,q2,q3,q4,q5,q6,q7);
M2 = Calc_M2(q1,q2,q3,q4,q5,q6,q7);
M3 = Calc_M3(q1,q2,q3,q4,q5,q6,q7);
M4 = Calc_M4(q1,q2,q3,q4,q5,q6,q7);
M5 = Calc_M5(q1,q2,q3,q4,q5,q6,q7);
M6 = Calc_M6(q1,q2,q3,q4,q5,q6,q7);
M7 = Calc_M7(q1,q2,q3,q4,q5,q6,q7);
M=[M1;M2;M3;M4;M5;M6;M7];
C11 = Calc_C11(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C12 = Calc_C12(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C13 = Calc_C13(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C14 = Calc_C14(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C15 = Calc_C15(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C16 = Calc_C16(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C17 = Calc_C17(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C21 = Calc_C21(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C22 = Calc_C22(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C23 = Calc_C23(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C24 = Calc_C24(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C25 = Calc_C25(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C26 = Calc_C26(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C27 = Calc_C27(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C31 = Calc_C31(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C32 = Calc_C32(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C33 = Calc_C33(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C34 = Calc_C34(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C35 = Calc_C35(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C36 = Calc_C36(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C37 = Calc_C37(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C41 = Calc_C41(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C42 = Calc_C42(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C43 = Calc_C43(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C44 = Calc_C44(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C45 = Calc_C45(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C46 = Calc_C46(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C47 = Calc_C47(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C51 = Calc_C51(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C52 = Calc_C52(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C53 = Calc_C53(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C54 = Calc_C54(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C55 = Calc_C55(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C56 = Calc_C56(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C57 = Calc_C57(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C61 = Calc_C61(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C62 = Calc_C62(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C63 = Calc_C63(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C64 = Calc_C64(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C65 = Calc_C65(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C66 = Calc_C66(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C67 = Calc_C67(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C71 = Calc_C71(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C72 = Calc_C72(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C73 = Calc_C73(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C74 = Calc_C74(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C75 = Calc_C75(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C76 = Calc_C76(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C77 = Calc_C77(q1,q2,q3,q4,q5,q6,q7,q1_d,q2_d,q3_d,q4_d,q5_d,q6_d,q7_d);
C=[C11 C12 C13 C14 C15 C16 C17;C21 C22 C23 C24 C25 C26 C27;C31 C32 C33 C34 C35 C36 C37;C41 C42 C43 C44 C45 C46 C47;C51 C52 C53 C54 C55 C56 C57;C61 C62 C63 C64 C65 C66 C67;C71 C72 C73 C74 C75 C76 C77];
G = Calc_G(q1,q2,q3,q4,q5,q6,q7);
%%
qdd_ode=pinv(M)*(tau_action-C*qd_ode-G);%摩擦扰动项-50*Ld，外力扰动项N
dydt=[qd_ode;qdd_ode];
end